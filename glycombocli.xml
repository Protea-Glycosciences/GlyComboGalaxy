<tool id="glycombo" name="GlyCombo" version="0.1+galaxy.0" profile="20.01" license="Apache2.0">
    <macros>
        <import>macros.xml</import>
    </macros>
    <description>Identify glycan and polysaccharide compositions from mass spectrometry files</description>
    <requirements>
        <container type="docker">proteaglycosciences/glycombocli:v6</container>
    </requirements>
    <command detect_errors="exit_code">
<![CDATA[
mkdir output_dir &&
/app/GlyComboCLI 

-F='$input' 

## Regular monosaccharide parameters
        #if $hex_settings.hexMin:
            --hexMin '$hex_settings.hexMin'
        #end if
        #if $hex_settings.hexMax:
            --hexMax '$hex_settings.hexMax'
        #end if
        #if $hex_settings.hexNAcMin:
            --hexNAcMin '$hex_settings.hexNAcMin'
        #end if
        #if $hex_settings.hexNAcMax:
            --hexNAcMax '$hex_settings.hexNAcMax'
        #end if
        #if $hex_settings.dHexMin:
            --dHexMin '$hex_settings.dHexMin'
        #end if
        #if $hex_settings.dHexMax:
            --dHexMax '$hex_settings.dHexMax'
        #end if
        #if $hex_settings.hexAMin:
            --hexAMin '$hex_settings.hexAMin'
        #end if
        #if $hex_settings.hexAMax:
            --hexAMax '$hex_settings.hexAMax'
        #end if
        #if $hex_settings.hexNMin:
            --hexNMin '$hex_settings.hexNMin'
        #end if
        #if $hex_settings.hexNMax:
            --hexNMax '$hex_settings.hexNMax'
        #end if
        #if $hex_settings.pentMin:
            --pentMin '$hex_settings.pentMin'
        #end if
        #if $hex_settings.pentMax:
            --pentMax '$hex_settings.pentMax'
        #end if
        
        ## Sialic acid parameters
        #if $sialic_acid_settings.kdnMin:
            --kdnMin '$sialic_acid_settings.kdnMin'
        #end if
        #if $sialic_acid_settings.kdnMax:
            --kdnMax '$sialic_acid_settings.kdnMax'
        #end if
        #if $sialic_acid_settings.neu5AcMin:
            --neu5AcMin '$sialic_acid_settings.neu5AcMin'
        #end if
        #if $sialic_acid_settings.neu5AcMax:
            --neu5AcMax '$sialic_acid_settings.neu5AcMax'
        #end if
        #if $sialic_acid_settings.neu5GcMin:
            --neu5GcMin '$sialic_acid_settings.neu5GcMin'
        #end if
        #if $sialic_acid_settings.neu5GcMax:
            --neu5GcMax '$sialic_acid_settings.neu5GcMax'
        #end if
        
        ## Modified sialic acid parameters
        #if $modified_sialic_acid_settings.enable_modified_sialic:
            #if $modified_sialic_acid_settings.lNeuAcMin:
                --lNeuAcMin '$modified_sialic_acid_settings.lNeuAcMin'
            #end if
            #if $modified_sialic_acid_settings.lNeuAcMax:
                --lNeuAcMax '$modified_sialic_acid_settings.lNeuAcMax'
            #end if
            #if $modified_sialic_acid_settings.eeNeuAcMin:
                --eeNeuAcMin '$modified_sialic_acid_settings.eeNeuAcMin'
            #end if
            #if $modified_sialic_acid_settings.eeNeuAcMax:
                --eeNeuAcMax '$modified_sialic_acid_settings.eeNeuAcMax'
            #end if
            #if $modified_sialic_acid_settings.dNeuAcMin:
                --dNeuAcMin '$modified_sialic_acid_settings.dNeuAcMin'
            #end if
            #if $modified_sialic_acid_settings.dNeuAcMax:
                --dNeuAcMax '$modified_sialic_acid_settings.dNeuAcMax'
            #end if
            #if $modified_sialic_acid_settings.amNeuAcMin:
                --amNeuAcMin '$modified_sialic_acid_settings.amNeuAcMin'
            #end if
            #if $modified_sialic_acid_settings.amNeuAcMax:
                --amNeuAcMax '$modified_sialic_acid_settings.amNeuAcMax'
            #end if
            #if $modified_sialic_acid_settings.lNeuGcMin:
                --lNeuGcMin '$modified_sialic_acid_settings.lNeuGcMin'
            #end if
            #if $modified_sialic_acid_settings.lNeuGcMax:
                --lNeuGcMax '$modified_sialic_acid_settings.lNeuGcMax'
            #end if
            #if $modified_sialic_acid_settings.eeNeuGcMin:
                --eeNeuGcMin '$modified_sialic_acid_settings.eeNeuGcMin'
            #end if
            #if $modified_sialic_acid_settings.eeNeuGcMax:
                --eeNeuGcMax '$modified_sialic_acid_settings.eeNeuGcMax'
            #end if
            #if $modified_sialic_acid_settings.dNeuGcMin:
                --dNeuGcMin '$modified_sialic_acid_settings.dNeuGcMin'
            #end if
            #if $modified_sialic_acid_settings.dNeuGcMax:
                --dNeuGcMax '$modified_sialic_acid_settings.dNeuGcMax'
            #end if
            #if $modified_sialic_acid_settings.amNeuGcMin:
                --amNeuGcMin '$modified_sialic_acid_settings.amNeuGcMin'
            #end if
            #if $modified_sialic_acid_settings.amNeuGcMax:
                --amNeuGcMax '$modified_sialic_acid_settings.amNeuGcMax'
            #end if
        #end if
        
        ## Chemical modifications
        #if $modifications.phosMin:
            --phosMin '$modifications.phosMin'
        #end if
        #if $modifications.phosMax:
            --phosMax '$modifications.phosMax'
        #end if
        #if $modifications.sulfMin:
            --sulfMin '$modifications.sulfMin'
        #end if
        #if $modifications.sulfMax:
            --sulfMax '$modifications.sulfMax'
        #end if
        #if $modifications.dHexNAcMin:
            --dHexNAcMin '$modifications.dHexNAcMin'
        #end if
        #if $modifications.dHexNAcMax:
            --dHexNAcMax '$modifications.dHexNAcMax'
        #end if
        #if $modifications.acetylMin:
            --acetylMin '$modifications.acetylMin'
        #end if
        #if $modifications.acetylMax:
            --acetylMax '$modifications.acetylMax'
        #end if
                
        ## Custom monosaccharides
        #if $custom_mono_settings.enable_custom_mono:
            #if $custom_mono_settings.custom_mono1:
                --customMono1Name '$custom_mono_settings.custom_mono1.customMono1Name'
                --customMono1CCount '$custom_mono_settings.custom_mono1.customMono1CCount'
                --customMono1HCount '$custom_mono_settings.custom_mono1.customMono1HCount'
                --customMono1NCount '$custom_mono_settings.custom_mono1.customMono1NCount'
                --customMono1OCount '$custom_mono_settings.custom_mono1.customMono1OCount'
                --customMono1Mass '$custom_mono_settings.custom_mono1.customMono1Mass'
                --customMono1Min '$custom_mono_settings.custom_mono1.customMono1Min'
                --customMono1Max '$custom_mono_settings.custom_mono1.customMono1Max'
            #end if
            
            #if $custom_mono_settings.custom_mono2:
                --customMono2Name '$custom_mono_settings.custom_mono2.customMono2Name'
                --customMono2CCount '$custom_mono_settings.custom_mono2.customMono2CCount'
                --customMono2HCount '$custom_mono_settings.custom_mono2.customMono2HCount'
                --customMono2NCount '$custom_mono_settings.custom_mono2.customMono2NCount'
                --customMono2OCount '$custom_mono_settings.custom_mono2.customMono2OCount'
                --customMono2Mass '$custom_mono_settings.custom_mono2.customMono2Mass'
                --customMono2Min '$custom_mono_settings.custom_mono2.customMono2Min'
                --customMono2Max '$custom_mono_settings.custom_mono2.customMono2Max'
            #end if
            
            #if $custom_mono_settings.custom_mono3:
                --customMono3Name '$custom_mono_settings.custom_mono3.customMono3Name'
                --customMono3CCount '$custom_mono_settings.custom_mono3.customMono3CCount'
                --customMono3HCount '$custom_mono_settings.custom_mono3.customMono3HCount'
                --customMono3NCount '$custom_mono_settings.custom_mono3.customMono3NCount'
                --customMono3OCount '$custom_mono_settings.custom_mono3.customMono3OCount'
                --customMono3Mass '$custom_mono_settings.custom_mono3.customMono3Mass'
                --customMono3Min '$custom_mono_settings.custom_mono3.customMono3Min'
                --customMono3Max '$custom_mono_settings.custom_mono3.customMono3Max'
            #end if
            
            #if $custom_mono_settings.custom_mono4:
                --customMono4Name '$custom_mono_settings.custom_mono4.customMono4Name'
                --customMono4CCount '$custom_mono_settings.custom_mono4.customMono4CCount'
                --customMono4HCount '$custom_mono_settings.custom_mono4.customMono4HCount'
                --customMono4NCount '$custom_mono_settings.custom_mono4.customMono4NCount'
                --customMono4OCount '$custom_mono_settings.custom_mono4.customMono4OCount'
                --customMono4Mass '$custom_mono_settings.custom_mono4.customMono4Mass'
                --customMono4Min '$custom_mono_settings.custom_mono4.customMono4Min'
                --customMono4Max '$custom_mono_settings.custom_mono4.customMono4Max'
            #end if
            
            #if $custom_mono_settings.custom_mono5:
                --customMono5Name '$custom_mono_settings.custom_mono5.customMono5Name'
                --customMono5CCount '$custom_mono_settings.custom_mono5.customMono5CCount'
                --customMono5HCount '$custom_mono_settings.custom_mono5.customMono5HCount'
                --customMono5NCount '$custom_mono_settings.custom_mono5.customMono5NCount'
                --customMono5OCount '$custom_mono_settings.custom_mono5.customMono5OCount'
                --customMono5Mass '$custom_mono_settings.custom_mono5.customMono5Mass'
                --customMono5Min '$custom_mono_settings.custom_mono5.customMono5Min'
                --customMono5Max '$custom_mono_settings.custom_mono5.customMono5Max'
            #end if
        #end if
        
        ## Custom reducing end
        #if $reducing_end_settings.enable_custom_reducing:
            --customReducingMass '$reducing_end_settings.customReducingMass'
            --customReducingName '$reducing_end_settings.customReducingName'
            --customReducedMassOutput '$reducing_end_settings.customReducedMassOutput'
            --customReducingCCount '$reducing_end_settings.customReducingCCount'
            --customReducingHCount '$reducing_end_settings.customReducingHCount'
            --customReducingNCount '$reducing_end_settings.customReducingNCount'
            --customReducingOCount '$reducing_end_settings.customReducingOCount'
        #end if
        
        ## Custom adduct
        #if $adduct_settings.enable_custom_adduct:
            --customAdductPolarity '$adduct_settings.customAdductPolarity'
            --customAdductMass '$adduct_settings.customAdductMass'
        #end if
        
        ## General analysis settings
        --derivatisation '$general_settings.derivatisation'
        --reducedEnd '$general_settings.reducedEnd'
        --adducts '$general_settings.adducts'
        --massError "$general_settings.massError"
        --massErrorType '$general_settings.massErrorType'
        #if $general_settings.offByOne:
            --offByOne
        #end if


--outputPath output_dir/

]]>
</command>
<inputs>
        <param format="mzml,txt" name="input" type="data" label="Input mass spectrometry data"
            help="Accepts mzML files or text files containing mass lists" />
        <section name="general_settings" title="General Analysis Settings" expanded="true">
            <param name="derivatisation" type="select" label="Derivatisation method">
                <expand macro="derivatisation" />
            </param>
            <param name="reducedEnd" type="select" label="Reducing end format">
                <expand macro="reducing_ends" />
            </param>
            <param name="adducts" type="select" label="Adduct type">
                <expand macro="adducts" />
            </param>
            <param name="massError" type="float" value="0.6" label="Mass Error"
                help="Mass error tolerance value in the units specified by Mass Error Type">
                <validator type="in_range" min="0.0" />
            </param>
            <param name="massErrorType" type="select" label="Mass error type">
                <expand macro="mass_error" />
            </param>
            <param name="offByOne" type="boolean"
                checked="false" label="Enable off-by-one searching"
                help="For cases of incorrect monoisotopic precursor determination" />
        </section>
        <section name="hex_settings" title="Common Monosaccharide Settings" expanded="true">
            <param name="hexMin" type="integer" min="0" value="0" label="Minimum hexose count" />
            <param name="hexMax" type="integer" min="0" value="0" label="Maximum hexose count" />
            <param name="hexNAcMin" type="integer" min="0" value="0"
                label="Minimum N-acetyl hexosamine count" />
            <param name="hexNAcMax" type="integer" min="0" value="0"
                label="Maximum N-acetyl hexosamine count" />
            <param name="dHexMin" type="integer" min="0" value="0" label="Minimum deoxyhexose count" />
            <param name="dHexMax" type="integer" min="0" value="0" label="Maximum deoxyhexose count" />
            <param name="hexAMin" type="integer" min="0" value="0"
                label="Minimum hexuronic acid count" />
            <param name="hexAMax" type="integer" min="0" value="0"
                label="Maximum hexuronic acid count" />
            <param name="hexNMin" type="integer" min="0" value="0" label="Minimum hexosamine count" />
            <param name="hexNMax" type="integer" min="0" value="0" label="Maximum hexosamine count" />
            <param name="pentMin" type="integer" min="0" value="0" label="Minimum pentose count" />
            <param name="pentMax" type="integer" min="0" value="0" label="Maximum pentose count" />
        </section>
        <section name="sialic_acid_settings" title="Sialic Acid Settings" expanded="true">
            <param name="kdnMin" type="integer" min="0" value="0" label="Minimum KDN count" />
            <param name="kdnMax" type="integer" min="0" value="0" label="Maximum KDN count" />
            <param name="neu5AcMin" type="integer" min="0" value="0"
                label="Minimum N-acetyl-neuraminic acid count" />
            <param name="neu5AcMax" type="integer" min="0" value="0"
                label="Maximum N-acetyl-neuraminic acid count" />
            <param name="neu5GcMin" type="integer" min="0" value="0"
                label="Minimum N-glycolyl-neuraminic acid count" />
            <param name="neu5GcMax" type="integer" min="0" value="0"
                label="Maximum N-glycolyl-neuraminic acid count" />
        </section>
        <section name="modified_sialic_acid_settings" title="Modified Sialic Acid Settings"
            expanded="false">
                <param name="enable_modified_sialic" type="boolean" truevalue="true" falsevalue="false" checked="false"
                    label="Enable modified sialic acid setting" />

                    <param name="lNeuAcMin" type="integer" min="0" value="0"
                        label="Minimum lactonised N-acetyl-neuraminic acid (a2,3) count" />
                    <param name="lNeuAcMax" type="integer" min="0" value="0"
                        label="Maximum lactonised N-acetyl-neuraminic acid (a2,3) count" />
                    <param name="eeNeuAcMin" type="integer" min="0" value="0"
                        label="Minimum ethyl esterified N-acetyl-neuraminic acid (a2,6) count" />
                    <param name="eeNeuAcMax" type="integer" min="0" value="0"
                        label="Maximum ethyl esterified N-acetyl-neuraminic acid (a2,6) count" />
                    <param name="dNeuAcMin" type="integer" min="0" value="0"
                        label="Minimum dimethylamidated N-acetyl-neuraminic acid (a2,6) count" />
                    <param name="dNeuAcMax" type="integer" min="0" value="0"
                        label="Maximum dimethylamidated N-acetyl-neuraminic acid (a2,6) count" />
                    <param name="amNeuAcMin" type="integer" min="0" value="0"
                        label="Minimum ammonia amidated N-acetyl-neuraminic acid (a2,3) count" />
                    <param name="amNeuAcMax" type="integer" min="0" value="0"
                        label="Maximum ammonia amidated N-acetyl-neuraminic acid (a2,3) count" />
                    <param name="lNeuGcMin" type="integer" min="0" value="0"
                        label="Minimum lactonised N-glycolyl-neuraminic acid (a2,3) count" />
                    <param name="lNeuGcMax" type="integer" min="0" value="0"
                        label="Maximum lactonised N-glycolyl-neuraminic acid (a2,3) count" />
                    <param name="eeNeuGcMin" type="integer" min="0" value="0"
                        label="Minimum ethyl esterified N-glycolyl-neuraminic acid (a2,6) count" />
                    <param name="eeNeuGcMax" type="integer" min="0" value="0"
                        label="Maximum ethyl esterified N-glycolyl-neuraminic acid (a2,6) count" />
                    <param name="dNeuGcMin" type="integer" min="0" value="0"
                        label="Minimum dimethylamidated N-glycolyl-neuraminic acid (a2,6) count" />
                    <param name="dNeuGcMax" type="integer" min="0" value="0"
                        label="Maximum dimethylamidated N-glycolyl-neuraminic acid (a2,6) count" />
                    <param name="amNeuGcMin" type="integer" min="0" value="0"
                        label="Minimum ammonia amidated N-glycolyl-neuraminic acid (a2,3) count" />
                    <param name="amNeuGcMax" type="integer" min="0" value="0"
                        label="Maximum ammonia amidated N-glycolyl-neuraminic acid (a2,3) count" />
        </section>
        <section name="modifications" title="Chemical Modifications" expanded="false">
            <param name="phosMin" type="integer" min="0" value="0" label="Minimum phosphate count" />
            <param name="phosMax" type="integer" min="0" value="0" label="Maximum phosphate count" />
            <param name="sulfMin" type="integer" min="0" value="0" label="Minimum sulfate count" />
            <param name="sulfMax" type="integer" min="0" value="0" label="Maximum sulfate count" />
            <param name="dHexNAcMin" type="integer" min="0" value="0"
                label="Minimum N-acetyl deoxyhexose count" />
            <param name="dHexNAcMax" type="integer" min="0" value="0"
                label="Maximum N-acetyl deoxyhexose count" />
            <param name="acetylMin" type="integer" min="0" value="0"
                label="Minimum acetylation count" />
            <param name="acetylMax" type="integer" min="0" value="0"
                label="Maximum acetylation count" />
        </section>
        <section name="custom_mono_settings" title="Custom Monosaccharides" expanded="false">
                <param name="enable_custom_mono" type="boolean" checked="false" label="Enable custom monosaccharide settings" />
                    <!-- Custom Monosaccharide 1-->
                        <param name="custom_mono1" type="boolean"
                            label="Custom Monosaccharide 1" />
                            <param name="customMono1Name" type="text" value=""
                                label="Name of first custom monosaccharide" />
                            <param name="customMono1CCount" type="integer" min="0" value="0"
                                label="Carbon count" />
                            <param name="customMono1HCount" type="integer" min="0" value="0"
                                label="Hydrogen count" />
                            <param name="customMono1NCount" type="integer" min="0" value="0"
                                label="Nitrogen count" />
                            <param name="customMono1OCount" type="integer" min="0" value="0"
                                label="Oxygen count" />
                            <param name="customMono1Mass" type="float" value="0.0" label="Mass" />
                            <param name="customMono1Min" type="integer" min="0" value="0" label="Minimum count" />
                            <param name="customMono1Max" type="integer" min="0" value="0" label="Maximum count" />
                    <!-- Custom Monosaccharide 2-->
                        <param name="custom_mono2" type="boolean"
                            label="Custom Monosaccharide 2" />
                            <param name="customMono2Name" type="text" value=""
                                label="Name of second custom monosaccharide" />
                            <param name="customMono2CCount" type="integer" min="0" value="0"
                                label="Carbon count" />
                            <param name="customMono2HCount" type="integer" min="0" value="0"
                                label="Hydrogen count" />
                            <param name="customMono2NCount" type="integer" min="0" value="0"
                                label="Nitrogen count" />
                            <param name="customMono2OCount" type="integer" min="0" value="0"
                                label="Oxygen count" />
                            <param name="customMono2Mass" type="float" value="0.0" label="Mass" />
                            <param name="customMono2Min" type="integer" min="0" value="0" label="Minimum count" />
                            <param name="customMono2Max" type="integer" min="0" value="0" label="Maximum count" />
                    <!-- Custom Monosaccharide 3-->
                        <param name="custom_mono3" type="boolean"
                            label="Custom Monosaccharide 3" />
                            <param name="customMono3Name" type="text" value=""
                                label="Name of third custom monosaccharide" />
                            <param name="customMono3CCount" type="integer" min="0" value="0"
                                label="Carbon count" />
                            <param name="customMono3HCount" type="integer" min="0" value="0"
                                label="Hydrogen count" />
                            <param name="customMono3NCount" type="integer" min="0" value="0"
                                label="Nitrogen count" />
                            <param name="customMono3OCount" type="integer" min="0" value="0"
                                label="Oxygen count" />
                            <param name="customMono3Mass" type="float" value="0.0" label="Mass" />
                            <param name="customMono3Min" type="integer" min="0" value="0" label="Minimum count" />
                            <param name="customMono3Max" type="integer" min="0" value="0" label="Maximum count" />
                    <!-- Custom Monosaccharide 4-->
                        <param name="custom_mono4" type="boolean"
                            label="Custom Monosaccharide 4" />
                                <param name="customMono4Name" type="text" value=""
                                    label="Name of fourth custom monosaccharide" />
                                <param name="customMono4CCount" type="integer" min="0" value="0"
                                    label="Carbon count" />
                                <param name="customMono4HCount" type="integer" min="0" value="0"
                                    label="Hydrogen count" />
                                <param name="customMono4NCount" type="integer" min="0" value="0"
                                    label="Nitrogen count" />
                                <param name="customMono4OCount" type="integer" min="0" value="0"
                                    label="Oxygen count" />
                                <param name="customMono4Mass" type="float" value="0.0" label="Mass" />
                                <param name="customMono4Min" type="integer" min="0" value="0" label="Minimum count" />
                                <param name="customMono4Max" type="integer" min="0" value="0" label="Maximum count" />
                    <!-- Custom Monosaccharide 5-->
                        <param name="custom_mono5" type="boolean"
                            label="Custom Monosaccharide 5" />
                                <param name="customMono5Name" type="text" value=""
                                    label="Name of fifth custom monosaccharide" />
                                <param name="customMono5CCount" type="integer" min="0" value="0"
                                    label="Carbon count" />
                                <param name="customMono5HCount" type="integer" min="0" value="0"
                                    label="Hydrogen count" />
                                <param name="customMono5NCount" type="integer" min="0" value="0"
                                    label="Nitrogen count" />
                                <param name="customMono5OCount" type="integer" min="0" value="0"
                                    label="Oxygen count" />
                                <param name="customMono5Mass" type="float" value="0.0" label="Mass" />
                                <param name="customMono5Min" type="integer" min="0" value="0" label="Minimum count" />
                                <param name="customMono5Max" type="integer" min="0" value="0" label="Maximum count" />
        </section>
        <section name="reducing_end_settings" title="Custom Reducing End Settings" expanded="false">
                <param name="enable_custom_reducing" type="boolean" label="Enable custom reducing end settings" />
                    <param name="customReducingMass" type="float" value="0.0"
                        label="Mass of custom reducing end" />
                    <param name="customReducingName" type="text" value=""
                        label="Name of custom reducing end" />
                    <param name="customReducedMassOutput" type="text" value=""
                        label="Output for reduced mass" />
                    <param name="customReducingCCount" type="text" value="" label="Carbon count" />
                    <param name="customReducingHCount" type="text" value="" label="Hydrogen count" />
                    <param name="customReducingNCount" type="text" value="" label="Nitrogen count" />
                    <param name="customReducingOCount" type="text" value="" label="Oxygen count" />
        </section>
        <section name="adduct_settings" title="Custom Adduct Settings" expanded="false">
                <param name="enable_custom_adduct" type="boolean" label="Enable custom adduct settings" />
                    <param name="customAdductPolarity" type="select" label="Polarity">
                        <option value="Positive">Positive</option>
                        <option value="Negative">Negative</option>
                    </param>
                    <param name="customAdductMass" type="float" value="0.0" label="Mass of custom adduct" />
        </section>
    </inputs>

	<outputs>
	    <data name="output_csv" format="csv" from_work_dir="output_dir/result.csv" />
	    <data name="output_txt" format="txt" from_work_dir="output_dir/parameter.txt" />
	</outputs>

    <tests>
        <!-- Tests 1 - 8 cover all monosaccharides, modifications, reducing ends, and adducts.-->
        <!--Free & MH- -->
        <test>
            <param name="input" value="text_test.txt" />
            <section name="general_settings">
                <param name="derivatisation" value="native" />
                <param name="reducedEnd" value="free" />
                <param name="massError" value="0.6" />
                <param name="massErrorType" value="Da" />
                <param name="adducts" value="MH-" />
            </section>
            <section name="hex_settings">
                <param name="hexMin" value="0" />
                <param name="hexMax" value="9" />
                <param name="hexNAcMin" value="0" />
                <param name="hexNAcMax" value="4" />
            </section>
            <output name="output_csv" file="output_dir/result.csv" />
        </test>
        <!--Reduced & MTFA+ -->
        <test>
        <param name="input" value="glycan_dummy_data.txt" />
        <section name="general_settings">
            <param name="derivatisation" value="native" />
            <param name="reducedEnd" value="reduced" />
            <param name="massError" value="0.6" />
            <param name="massErrorType" value="Da" />
            <param name="adducts" value="MTFA-" />
        </section>

        <section name="hex_settings">
            <param name="hexMin" value="0" />
            <param name="hexMax" value="2" />
            <param name="hexAMin" value="0" />
            <param name="hexAMax" value="3" />
            <param name="hexNMin" value="0" />
            <param name="hexNMax" value="2" />
            <param name="pentMin" value="0" />
            <param name="pentMax" value="3" />
        </section>

        <section name="modifications">
            <param name="acetylMin" value="0" />
            <param name="acetylMax" value="2" />
        </section>

        <output name="output_csv">
            <assert_contents>
            <has_text text="(HexA)2 (Hex)2 (Acetyl)1" />
            <has_text text="(HexA)3 (Pent)3" />
            <has_text text="(HexN)2 (Acetyl)2" />
            <has_text text="(HexA)1" />
            <has_text text="(HexN)1 (Hex)1 (Acetyl)1" />
            </assert_contents>
        </output>
        </test>

	<!-- InstantPC & MFA- -->
	<test>
	  <param name="input" value="glycan_dummy_data.txt" />
	  <section name="general_settings">
	    <param name="derivatisation" value="native" />
	    <param name="reducedEnd" value="instantpc" />
	    <param name="massError" value="0.6" />
	    <param name="massErrorType" value="Da" />
	    <param name="adducts" value="MFA-" />
	  </section>

	  <section name="hex_settings">
	    <param name="hexMax" value="3" />
	  </section>

	  <section name="modified_sialic_acid_settings">
	    <param name="enable_modified_sialic" value="true" />
	    <param name="lNeuAcMax" value="2" />
	    <param name="dNeuAcMax" value="2" />
	    <param name="eeNeuAcMax" value="3" />
	  </section>

	  <output name="output_csv">
	    <assert_contents>
	      <has_text text="(Hex)3 (lNeuAc)1 (dNeuAc)1" />
	      <has_text text="(eNeuAc)1" />
	      <has_text text="(Hex)1 (lNeuAc)2" />
	      <has_text text="(lNeuAc)1 (eNeuAc)3 (dNeuAc)1" />
	      <has_text text="(Hex)2 (dNeuAc)2" />
	    </assert_contents>
	  </output>
	</test>
	<!-- Rapifluor & MAA+ -->
	<test>
	  <param name="input" value="glycan_dummy_data.txt" />
	  <section name="general_settings">
	    <param name="derivatisation" value="native" />
	    <param name="reducedEnd" value="rapifluor" />
	    <param name="massError" value="0.6" />
	    <param name="massErrorType" value="Da" />
	    <param name="adducts" value="MAA-" />
	  </section>

	  <section name="hex_settings">
	    <param name="hexMax" value="3" />
	  </section>

	  <section name="modified_sialic_acid_settings">
	    <param name="enable_modified_sialic" value="true" />
	    <param name="amNeuAcMax" value="3" />
	    <param name="lNeuGcMax" value="2" />
	    <param name="eeNeuGcMax" value="3" />
	    <param name="dNeuGcMax" value="2" />
	  </section>

	  <output name="output_csv">
	    <assert_contents>
	      <has_text text="(Hex)2 (amNeuAc)2 (eNeuGc)3" />
	      <has_text text="(lNeuGc)2 (eNeuGc)3" />
	      <has_text text="(Hex)3 (lNeuGc)1 (dNeuGc)2" />
	      <has_text text="(amNeuAc)1 (lNeuGc)2 (dNeuGc)1" />
	      <has_text text="(Hex)1 (amNeuAc)3 (eNeuGc)1 (dNeuGc)1" />
	    </assert_contents>
	  </output>
	</test>
	<!-- 2aa & MNH4 -->
	<test>
	  <param name="input" value="glycan_dummy_data.txt" />
	  <section name="general_settings">
	    <param name="derivatisation" value="native" />
	    <param name="reducedEnd" value="2aa" />
	    <param name="massError" value="0.6" />
	    <param name="massErrorType" value="Da" />
	    <param name="adducts" value="MNH4+" />
	  </section>
	  <section name="hex_settings">
	    <param name="hexMin" value="1" />
	    <param name="hexMax" value="3" />
	  </section>
	  <section name="modified_sialic_acid_settings">
	    <param name="enable_modified_sialic" value="true" />
	    <param name="amNeuGcMin" value="0" />
	    <param name="amNeuGcMax" value="2" />
	  </section>
	  <section name="modifications">
	    <param name="phosMin" value="0" />
	    <param name="phosMax" value="3" />
	  </section>
	  <output name="output_csv" file="dummy_output.csv">
	    <assert_contents>
	      <has_text text="(Hex)1 (amNeuGc)1" />
	      <has_text text="(Hex)2 (Phos)1" />
	      <has_text text="(Hex)3 (Phos)1 (amNeuGc)2" />
	      <has_text text="(Hex)2 (Phos)3" />
	    </assert_contents>
	  </output>
	</test>

	<!-- 2ab & MK-->
	<test>
	  <param name="input" value="glycan_dummy_data.txt" />
	  <section name="general_settings">
	    <param name="derivatisation" value="native" />
	    <param name="reducedEnd" value="2ab" />
	    <param name="massError" value="0.6" />
	    <param name="massErrorType" value="Da" />
	    <param name="adducts" value="MK+" />
	  </section>
	  <section name="hex_settings">
	    <param name="hexMin" value="1" />
	    <param name="hexMax" value="3" />
	  </section>
	  <section name="modifications">
	    <param name="sulfMin" value="0" />
	    <param name="sulfMax" value="2" />
	    <param name="dHexNAcMin" value="0" />
	    <param name="dHexNAcMax" value="3" />
	  </section>
	  <output name="output_csv" file="dummy_output.csv">
	    <assert_contents>
	      <has_text text="(Hex)1 (Sulf)1" />
	      <has_text text="(Hex)2 (dHexNAc)3" />
	      <has_text text="(Hex)3 (Sulf)2" />
	      <has_text text="(Hex)2 (dHexNAc)2" />
	    </assert_contents>
	  </output>
	</test>

	<!-- Procainamide & Na -->
	<test>
	  <param name="input" value="glycan_dummy_data.txt" />
	  <section name="general_settings">
	    <param name="derivatisation" value="native" />
	    <param name="reducedEnd" value="procainamide" />
	    <param name="massError" value="0.6" />
	    <param name="massErrorType" value="Da" />
	    <param name="adducts" value="MNa+" />
	  </section>
	  <section name="hex_settings">
	    <param name="hexMin" value="0" />
	    <param name="hexMax" value="4" />
	    <param name="hexNAcMin" value="0" />
	    <param name="hexNAcMax" value="3" />
	  </section>
	  <section name="sialic_acid_settings">
	    <param name="neu5GcMin" value="0" />
	    <param name="neu5GcMax" value="3" />
	  </section>
	  <output name="output_csv" file="dummy_output.csv">
	    <assert_contents>
	      <has_text text="(Hex)2 (NeuGc)1" />
	      <has_text text="(HexNAc)3" />
	      <has_text text="(Hex)1 (NeuGc)3 (HexNAc)2" />
	      <has_text text="(HexNAc)2" />
	      <has_text text="(Hex)4 (NeuGc)3" />
	    </assert_contents>
	  </output>
	</test>

	<!-- GirP -->
	<test>
	  <param name="input" value="glycan_dummy_data.txt" />
	  <section name="general_settings">
	    <param name="derivatisation" value="native" />
	    <param name="reducedEnd" value="girard" />
	    <param name="massError" value="0.6" />
	    <param name="massErrorType" value="Da" />
	    <param name="adducts" value="Neutral" />
	  </section>
	  <section name="hex_settings">
	    <param name="hexMin" value="0" />
	    <param name="hexMax" value="4" />
	    <param name="hexNAcMin" value="0" />
	    <param name="hexNAcMax" value="3" />
	  </section>
	  <section name="sialic_acid_settings">
	    <param name="neu5AcMin" value="0" />
	    <param name="neu5AcMax" value="1" />
	  </section>
	  <output name="output_csv" file="dummy_output.csv">
	    <assert_contents>
	      <has_text text="(Hex)3 (NeuAc)1 (HexNAc)1" />
	      <has_text text="(HexNAc)3" />
	      <has_text text="(Hex)4" />
	      <has_text text="(HexNAc)1" />
	      <has_text text="(Hex)1 (NeuAc)1" />
	    </assert_contents>
	  </output>
	</test>
    <!-- Tests #8 - 9 Derivatisation -->
    <!-- Permethylated -->
    <test>
    <param name="input" value="glycan_dummy_deriv.txt" />
    <section name="general_settings">
        <param name="derivatisation" value="permethylated" />
        <param name="reducedEnd" value="free" />
        <param name="massError" value="0.6" />
        <param name="massErrorType" value="Da" />
        <param name="adducts" value="Neutral" />
    </section>
    <section name="hex_settings">
        <param name="hexMin" value="0" />
        <param name="hexMax" value="1" />
        <param name="dHexMin" value="0" />
        <param name="dHexMax" value="1" />
        <param name="hexNMin" value="0" />
        <param name="hexNMax" value="1" />
        <param name="hexAMin" value="0" />
        <param name="hexAMax" value="1" />
        <param name="pentMin" value="0" />
        <param name="pentMax" value="1" />
        <param name="hexNAcMin" value="0" />
        <param name="hexNAcMax" value="1" />
    </section>
    <section name="sialic_acid_settings">
        <param name="kdnMin" value="0" />
        <param name="kdnMax" value="1" />
        <param name="neu5AcMin" value="0" />
        <param name="neu5AcMax" value="1" />
        <param name="neu5GcMin" value="0" />
        <param name="neu5GcMax" value="1" />
    </section>
    <section name="modifications">
        <param name="phosMin" value="0" />
        <param name="phosMax" value="1" />
        <param name="sulfMin" value="0" />
        <param name="sulfMax" value="1" />
    </section>
    <output name="output_csv" file="dummy_output_deriv.csv">
        <assert_contents>
        <has_text text="(dHex)1 (HexN)1 (KDN)1 (Hex)1" />
        <has_text text="(HexA)1 (Pent)1" />
        <has_text text="(NeuAc)1 (NeuGc)1 (HexNAc)1" />
        <has_text text="(Hex)1 (HexNAc)1 (Phos)1" />
        <has_text text="(Hex)1 (HexNAc)1 (Sulf)1" />
        </assert_contents>
    </output>
    </test>
    <!-- Peracetylated -->
    <test>
    <param name="input" value="glycan_dummy_deriv.txt" />
    <section name="general_settings">
        <param name="derivatisation" value="peracetylated" />
        <param name="reducedEnd" value="free" />
        <param name="massError" value="0.6" />
        <param name="massErrorType" value="Da" />
        <param name="adducts" value="Neutral" />
    </section>
    <section name="hex_settings">
        <param name="hexMin" value="0" />
        <param name="hexMax" value="1" />
        <param name="dHexMin" value="0" />
        <param name="dHexMax" value="1" />
        <param name="hexNMin" value="0" />
        <param name="hexNMax" value="1" />
        <param name="hexAMin" value="0" />
        <param name="hexAMax" value="1" />
        <param name="pentMin" value="0" />
        <param name="pentMax" value="1" />
        <param name="hexNAcMin" value="0" />
        <param name="hexNAcMax" value="1" />
    </section>
    <section name="sialic_acid_settings">
        <param name="kdnMin" value="0" />
        <param name="kdnMax" value="1" />
        <param name="neu5AcMin" value="0" />
        <param name="neu5AcMax" value="1" />
        <param name="neu5GcMin" value="0" />
        <param name="neu5GcMax" value="1" />
    </section>
    <section name="modifications">
        <param name="phosMin" value="0" />
        <param name="phosMax" value="1" />
        <param name="sulfMin" value="0" />
        <param name="sulfMax" value="1" />
    </section>
    <output name="output_csv" file="dummy_output_deriv.csv">
        <assert_contents>
        <has_text text="(dHex)1 (KDN)1 (Hex)1 (HexNAc/HexN)1" />
        <has_text text="(HexA)1 (Pent)1" />
        <has_text text="(NeuAc)1 (NeuGc)1 (HexNAc/HexN)1" />
        <has_text text="(Hex)1 (HexNAc/HexN)1 (Phos)1" />
        <has_text text="(Hex)1 (HexNAc/HexN)1 (Sulf)1" />
        </assert_contents>
    </output>
    </test>
    </tests>
    <help>
<![CDATA[ **What it does** GlyComboCLI is an open source software for combinatorial glycan composition determination to identify glycans in MS acquisitions of glycan-containing samples in text or mzML formats. This application enables rapid extraction of precursor m/z values from mzML files, a vendor-neutral format that ensures cross-platform compatibility.

**Features** 

- Analyze mass spectrometry data of glycans and polysaccharides

- Support for mzML and text file inputs

- Extensive monosaccharide composition search capabilities

- Customizable parameters for different types of glycans

- Supports various derivatisation methods and reducing end formats

- Ability to define custom monosaccharides and adducts


**Input Parameters** The tool offers extensive control over the glycan composition search: 

**Common Monosaccharides**: Hexose, N-acetyl hexosamine, deoxyhexose, and more 

**Sialic Acids**: KDN, Neu5Ac, Neu5Gc, and modified variants

**Chemical Modifications**: Phosphate, sulfate, acetylation 

**Custom Monosaccharides**: Define up to 5 custom monosaccharides 

**Reducing End Settings**: Multiple pre-defined options or custom configurations 

**Adduct Settings**: Various adduct types for positive and negative modes 

**Output** The tool produces a tabular output file listing potential glycan compositions that match the mass spectral data. 

]]>
</help>
    <citations>
        <citation type="bibtex"> article{doi:10.1021/jasms.4c00188, author = {Kelly, Maia I. and
            Ashwood, Christopher}, title = {GlyCombo Enables Rapid, Complete Glycan Composition
            Identification across Diverse Glycomic Sample Types}, journal = {Journal of the American
            Society for Mass Spectrometry}, volume = {35}, number = {10}, pages = {2324-2330}, year
            = {2024}, doi = {10.1021/jasms.4c00188}, note ={PMID: 39271475}, }</citation>
    </citations>
</tool>